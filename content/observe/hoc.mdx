---
name: observer HOC
menu: Observe state
route: '/observer-hoc'
---

# observer HOC

Is the most prominent from family of tools to introduce reactivity to your components. Please refer to [React docs](https://reactjs.org/docs/higher-order-components.html) for a basic understanding of HOC pattern.

```ts
observer<P>(baseComponent: React.FC<P>, options?: IObserverOptions): React.FC<P>

interface IObserverOptions {
    // Pass true to use React.forwardRef over the inner component. It's false by the default.
    forwardRef?: boolean
}
```

> Use `mobx-react` if you need to observe class component. It doesn't support any of mentioned options, though.

The `observer` converts a component into a reactive component, which tracks which observables are used automatically and re-renders the component when one of these values changes.

Along the observer capability, the `React.memo` is applied to the component. The general idea is, that observed components rarely need to re-render based on a complex props.

> **âš  WARNING**
>
> If component wrapped to `observer` depends on updates of [legacy context](https://reactjs.org/docs/legacy-context.html), the underlying `React.memo` will effectively prevent that update to propagate.
>
> Try to avoid using legacy context or alternatively use `Observer` component or `useObserver` hook.

```tsx
import { observer, useLocalStore } from 'mobx-react' // 6.x or mobx-react-lite@1.4.0

export const Counter = observer<Props>(props => {
  const store = useLocalStore(() => ({
    count: props.initialCount,
    inc() {
      store.count += 1
    },
  }))

  return (
    <div>
      <span>{store.count}</span>
      <button onClick={store.inc}>Increment</button>
    </div>
  )
})
```

## Babel macro

By default, components wrapped with the observer HOC are anonymous. The `Counter` component from the example above would only
show up as `wrappedComponent` or `Memo` in the React DevTools or in console log mesages.

For a better developer experience, there is a Babel macro included in the `mobx-react-lite` package, which
transforms components wrapped with `observer` to retain their name.

In order to use the macro, install [`babel-plugin-macros`](https://github.com/kentcdodds/babel-plugin-macros).

```
npm install --save-dev babel-plugin-macros
```

Next add the `babel-plugin-macros` plugin to your Babel config (`.babelrc`):

```
{
  "plugins": ["macros"]
}
```

Now you can use the macro simply by changing the import declarations from `mobx-react-lite` to `mobx-react-lite/macro`.

```tsx
import { observer, useLocalStore } from 'mobx-react-lite/macro'
```



